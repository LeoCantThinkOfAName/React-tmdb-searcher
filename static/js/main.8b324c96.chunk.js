(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(35),l=a.n(c),o=(a(97),a(22)),i=a(23),s=a(26),u=a(24),m=a(27),h=(a(99),a(55)),p=a.n(h),d=a(82),g=a(29),E=a.n(g),v=a(36),f=a.n(v),b=a(57),I=a(25),y={"en-US":{translation:a(86)},"zh-TW":{translation:a(87)}};b.a.use(I.a).init({resources:y,lng:"zh-TW",keySeperator:!1,interpolation:{escapeValue:!1}});var k=b.a,O=Object(n.createContext)(),w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={movieId:null,movie:{},lang:"zh-TW",casts:[],searchTerm:"",searchResults:[],timeout:null,onLangSelect:function(e){a.setState({lang:e}),a.fetchData(a.state.movieId),k.changeLanguage(e)},onInputChange:function(e){a.setState({searchTerm:e}),clearTimeout(a.state.timeout),a.state.timeout=setTimeout(function(){a.searchMovie(e)},500)},onSearchResultClicked:function(e){a.setState({searchResults:[],searchTerm:""}),a.fetchData(e)}},a.fetchData=function(e){var t=f()().format("YYYY-MM-DD"),n=f()().subtract(1,"months").format("YYYY-MM-DD");E.a.get("".concat("https://api.themoviedb.org/3","/discover/movie?primary_release_date.gte=").concat(n,"&primary_release_date.lte=").concat(t,"&api_key=").concat("3b0b4a20916b38bd05d6eaca16934913")).then(function(){var t=Object(d.a)(p.a.mark(function t(n){var r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=Math.floor(Math.random()*n.data.results.length),t.next=3,E.a.get("".concat("https://api.themoviedb.org/3","/movie/").concat(e||n.data.results[r].id,"?api_key=").concat("3b0b4a20916b38bd05d6eaca16934913","&language=").concat(a.state.lang)).then(function(e){a.setState({movieId:e.data.id,movie:e.data})});case 3:return t.next=5,E.a.get("".concat("https://api.themoviedb.org/3","/movie/").concat(e||n.data.results[r].id,"/credits?api_key=").concat("3b0b4a20916b38bd05d6eaca16934913")).then(function(e){a.setState({casts:e.data.cast})}).catch(function(e){console.log(e)});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){console.log(e)})},a.searchMovie=function(e){0!==e.length?E.a.get("".concat("https://api.themoviedb.org/3","/search/movie?api_key=").concat("3b0b4a20916b38bd05d6eaca16934913","&language=").concat(a.state.lang,"&page=1&query=").concat(a.state.searchTerm)).then(function(e){a.setState({searchResults:e.data.results.slice(0,5),timeout:null})}).catch(function(e){console.log(e)}):a.setState({searchResults:[]})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){return r.a.createElement(O.Provider,{value:this.state},this.props.children)}}]),t}(n.PureComponent),R=O.Consumer,x=a(88),A=a.n(x);function S(){return r.a.createElement(R,null,function(e){var t=e.movie;return void 0===t.poster_path?r.a.createElement("div",{className:"imagepanel"},r.a.createElement("dir",{className:"loader-wrapper"},r.a.createElement(A.a,{size:150,color:"#01d277"}))):r.a.createElement("div",{className:"imagepanel"},r.a.createElement("picture",null,r.a.createElement("source",{media:"(min-width: 1000px)",srcSet:"".concat("https://image.tmdb.org/t/p","/original").concat(t.poster_path)}),r.a.createElement("source",{media:"(min-width: 800px)",srcSet:"".concat("https://image.tmdb.org/t/p","/w500").concat(t.poster_path)}),r.a.createElement("img",{src:"".concat("https://image.tmdb.org/t/p","/w342").concat(t.poster_path),alt:t.title,title:t.title})))})}var j=a(38),N=a.n(j);function T(e){var t=e.genres;return void 0===t?r.a.createElement("span",null,"..."):0===t.length?r.a.createElement("span",null):r.a.createElement("ul",{className:"genrelist"},t.map(function(e){return r.a.createElement("li",{key:e.id},e.name)}))}var Y=a(39),D=a.n(Y);function C(e){var t=e.casts;return 0===t.length?r.a.createElement("span",null,"..."):r.a.createElement("ul",{className:"castlist"},t.map(function(e){return r.a.createElement("li",{key:e.cast_id},r.a.createElement("figure",null,r.a.createElement("img",{src:null!=e.profile_path?"".concat("https://image.tmdb.org/t/p","/w185").concat(e.profile_path):D.a,alt:e.name}),r.a.createElement("figcaption",null,r.a.createElement("strong",null,e.name)," as ",r.a.createElement("strong",null,e.character))))}))}var B=Object(I.b)()(function(e){var t=e.t;return r.a.createElement(R,null,function(e){var a=e.movie,n=e.casts;return r.a.createElement("div",{className:"contentpanel"},r.a.createElement("article",null,r.a.createElement("header",null,r.a.createElement("h1",null,a.title),r.a.createElement("div",null,r.a.createElement("strong",null,t("Release Date"),": "),r.a.createElement(N.a,{date:a.release_date,format:"MM/DD/YYYY",withTitle:!0})),r.a.createElement("div",null,r.a.createElement("strong",null,t("Genres"),": "),r.a.createElement(T,{genres:a.genres}))),r.a.createElement("main",null,r.a.createElement("h2",null,t("Overview"),": "),r.a.createElement("div",null,""===a.overview?t("Not Available"):a.overview)),r.a.createElement("footer",null,r.a.createElement("h2",null,t("Cast"),":"),r.a.createElement(C,{casts:n}))))})}),H=a(56);function Q(e){var t=e.results,a=e.term,n=e.handleClick,c=new RegExp(a,"gi");return r.a.createElement(H.TransitionGroup,{component:"ul"},t.map(function(e){return r.a.createElement(H.CSSTransition,{key:e.id,timeout:800,classNames:"flip"},r.a.createElement("li",null,r.a.createElement("div",{className:"card",style:{backgroundImage:e.backdrop_path?"url(".concat("https://image.tmdb.org/t/p","/w300").concat(e.backdrop_path,")"):"url(".concat(D.a,")")},onClick:function(){return n(e.id)}},r.a.createElement("div",{className:"card-mask"},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.title.replace(c,function(e){return"<b>".concat(e,"</b>")})}}),"\xa0",r.a.createElement("span",null,"(",r.a.createElement(N.a,{date:e.release_date,format:"YYYY",withTitle:!0}),")"),r.a.createElement("div",{className:"card-overview"},e.overview)))))}))}var J=a(90),M=a.n(J),z=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={focus:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onFocusHandler",value:function(){!1===this.state.focus?this.setState({focus:!0}):this.setState({focus:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement(R,null,function(t){return r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:M.a,alt:"M-Box",className:"logo"}),r.a.createElement("div",{className:"controls"},r.a.createElement("div",{className:"searchbox"},r.a.createElement("input",{type:"text",placeholder:e.props.t("enterSearchTerm"),onChange:function(e){return t.onInputChange(e.target.value)},onFocus:function(t){return e.onFocusHandler(t)},onBlur:function(t){return e.onFocusHandler(t)},value:t.searchTerm,style:{maxWidth:e.state.focus?250:65}}),r.a.createElement("div",{className:"search-result"},r.a.createElement(Q,{results:t.searchResults,term:t.searchTerm,handleClick:t.onSearchResultClicked}))),r.a.createElement("select",{onChange:function(e){return t.onLangSelect(e.target.value)}},r.a.createElement("option",{value:"zh-TW"},e.props.t("zh-TW")),r.a.createElement("option",{value:"en-US"},e.props.t("en-US")))))})}}]),t}(n.PureComponent),G=Object(I.b)()(z),L=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(w,null,r.a.createElement("div",{className:"App"},r.a.createElement(G,null),r.a.createElement("div",{className:"main-wrapper"},r.a.createElement(S,null),r.a.createElement(B,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},39:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALkAAAC5CAYAAAB0rZ5cAAAEyUlEQVR42u3cyS9kaxjA4f4jLf0LEjuxsxGJRIiwMcQCG8LCRiwkYtgYFiywMIUgppAIIoZz856bU33E0KXqlIU8J3ni3u6u6iK/+ur9vqL/1NXVJfCb/fFFQOQgchA5iBxEDiIHkSNyEDmIHEQOIgeRg8hB5IgcRA4iB5GDyEHkIHIQOSIHkYPIQeQgchA5iBxEjshB5CByEDmIHEQOIgeRI3IQOYgcRA4iB5GDyBG5LwQiB5GDyEHkIHIQOYgckYPIQeQgchA5iBxEDiJH5CByEDmIHEQOIgeRg8gROYgcRA4iB5GDyEHkIHJEDiIHkdfA0dFRkl0bGxtJfX19WbeLPxvX09NTMj4+XtVj6OjoSG5vbwu5r9HR0eTx8TF9bC8vL8nMzIwwRf438ohscnLyxyOfmppKnp+fk5ubm6Stra2q+9rc3Ezy1/HxcdLQ0CBOkf+9Li8vk9bW1h+NPLuv3d3dqu4nniDxRInr7u4u/Rireqzu4hR56Xp9fU3W19f/ObYUFXlTU1NydnaW/r2zs7NVfS4xmsSIEq8KKysrpbFldXVVnCL/P+4IJFv9xsbGfiTygYGB5OHhIRX/Xen9xJNyb2+vtIoPDg4m5+fn6f9fX1+X9erEL4/8/v4+2dnZSWOP6+LiImlpaal55LF6x98Zq3ms6pXeT39/f/pEievw8DCNPlZwG1CRv4l8aGgojTtb2eMlv9aRxxyenexU83ksLi6WHnc29uRPWmxARZ5G3t3dnUxMTJTCiI8jIyM1izzbKMYMHScslX4Ozc3NpdEkjiK7urrSX4+oT09PbUBF/jbyeJnPAo4rxoiIqBaRx+3i9hFmnJUXcTYec3l+07ywsFAawWxARZ5GHr8Wm7Srq6vSy//S0lJNIl9eXn4zQ1d7Nh6z9/T09Kezug2oyEuRh3hTKAKOKyKJ04oiI8+PEjFPF3E2/tGbSflTFxtQkb+JPOLY2toqjS0nJydJY2NjYZFnR4cxZgwPD1d9Nh5XrOj/+jM2oCJ/83vt7e2lVTIimZ+fLyzyIo4O86v0V48jv9pX+6Til0UeYsbNVsF4k6Wvr6+QyIs4OszP29+5bEBF/m61jDeJsuvg4CAdW6qJvKijw+xs/LuXDajI3+ns7EyP+bKxZW5urqrIizg6zJ+Nx32tra2lj+szMWrlRy8bUJF/OENnY0vEub+/X3HkRRwd5s/Gy53rs7f5bUBF/umRXxZ2thpWEnlRR4f57xsv937yM7wNqMg/1NvbWxpb8j9o8Z3Ie3p60g1sNZHlT0si2oi33CdYrOA2oCL/Usy32SpeSeTZaU28o/rVdzmWezb+3bEjf9vYgIpW5O/EyUrM0pVGvr29nd4uPlZ7Nl7JD1pkP0+ajVyiFfmH4qw8+/Gy70QeK3es4B99j0klZ+P57zisdJ4XrX+SAkSOyEHkIHIQOYgcRA4iB5EjchA5iBxEDiIHkYPIQeSIHEQOIgeRg8hB5CByRO6LgMhB5CByEDmIHEQOIkfkIHIQOYgcRA4iB5GDyBE5iBxEDiIHkYPIQeQgckQOIgeRg8hB5CByEDmIHJGDyEHkIHIQOYgcRA4iR+QgchA5iBxEDiIHkSNyXwhEDiIHkYPIQeQgchA5Iodf6j9y4S2TLQdwZQAAAABJRU5ErkJggg=="},86:function(e){e.exports={"Release Date":"Release Date",Overview:"Overview",Cast:"Cast","Not Available":"Not Available",Genres:"Genres",enterSearchTerm:"Enter the Title...","zh-TW":"\u4e2d\u6587","en-US":"English"}},87:function(e){e.exports={"Release Date":"\u4e0a\u6620\u65e5\u671f",Overview:"\u7c21\u4ecb",Cast:"\u6f14\u54e1\u5217\u8868","Not Available":"\u66ab\u7121\u8cc7\u6599",Genres:"\u96fb\u5f71\u5206\u985e",enterSearchTerm:"\u8f38\u5165\u6a19\u984c...","zh-TW":"\u4e2d\u6587","en-US":"English"}},90:function(e,t,a){e.exports=a.p+"static/media/tmdb.22af8ff1.svg"},92:function(e,t,a){e.exports=a(193)},97:function(e,t,a){},99:function(e,t,a){}},[[92,2,1]]]);
//# sourceMappingURL=main.8b324c96.chunk.js.map